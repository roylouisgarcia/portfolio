<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certifications Slideshow Test</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Certifications Slideshow Test</h1>
        
        <!-- Certifications section -->
        <div class="certifications" id="certificationsTest">
          <div class="projectheader">Certifications</div>
          <p>
            My commitment to continuous learning is demonstrated through various certifications 
            and course completions from platforms like Coursera, Udacity, and other educational providers.
          </p>
          <div class="certifications-slideshow-container">
            <div class="certifications-slideshow-wrapper">
              <div class="certifications-slides-container" id="certificationsSlides">
                <!-- Slides will be dynamically generated by JavaScript -->
              </div>
              
              <!-- Navigation arrows -->
              <button class="cert-nav-btn cert-prev-btn" id="certPrevBtn">&#10094;</button>
              <button class="cert-nav-btn cert-next-btn" id="certNextBtn">&#10095;</button>
            </div>
            
            <!-- Slide counter -->
            <div class="cert-slide-counter">
              <span id="certCurrentSlide">1</span> / <span id="certTotalSlides">0</span>
            </div>
            
            <!-- Thumbnail navigation -->
            <div class="cert-thumbnail-container" id="certThumbnailContainer">
              <!-- Thumbnails will be inserted here -->
            </div>
          </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // Certifications Slideshow functionality
        let currentCertSlideIndex = 0;
        let certSlides = [];
        let certificationsData = [];

        // Parse mooc_projects.txt content into structured data
        function parseMoocProjectsData(content) {
          const projects = [];
          const lines = content.split('\n');
          let currentProject = {};
          
          lines.forEach(line => {
            line = line.trim();
            
            if (line === '') {
              // Empty line might indicate end of project
              if (currentProject.title && currentProject.githubUrl && currentProject.image1) {
                projects.push({...currentProject});
              }
              // Reset for potential new project
              if (Object.keys(currentProject).length > 3) {
                currentProject = {};
              }
            } else if (line.includes(':')) {
              const colonIndex = line.indexOf(':');
              const key = line.substring(0, colonIndex).trim().toLowerCase();
              const value = line.substring(colonIndex + 1).trim();
              
              if (key === 'title') {
                // Start of new project
                if (currentProject.title && currentProject.githubUrl && currentProject.image1) {
                  projects.push({...currentProject});
                }
                currentProject = { title: value };
              } else if (key === 'github url') {
                currentProject.githubUrl = value;
              } else if (key === 'image 1') {
                currentProject.image1 = value;
              } else if (key === 'image 2') {
                currentProject.image2 = value;
              } else if (key === 'description') {
                currentProject.description = value;
              } else if (key === 'actual site') {
                currentProject.actualSite = value;
              } else if (key === 'read more' || key === 'read more:') {
                currentProject.readMore = value;
              }
            }
          });
          
          // Don't forget the last project
          if (currentProject.title && currentProject.githubUrl && currentProject.image1) {
            projects.push(currentProject);
          }
          
          console.log('Parsed projects:', projects);
          return projects;
        }

        // Load certifications data from mooc_projects.txt
        function loadCertificationsData() {
          console.log('Loading certifications data...');
          fetch('./mooc_projects.txt')
            .then(response => {
              console.log('Fetch response:', response);
              return response.text();
            })
            .then(content => {
              console.log('File content loaded, length:', content.length);
              certificationsData = parseMoocProjectsData(content);
              console.log('Loaded certifications data:', certificationsData);
              loadCertSlides();
            })
            .catch(error => {
              console.error('Error loading mooc_projects.txt:', error);
            });
        }

        // Load slides dynamically based on parsed data
        function loadCertSlides() {
          const slidesContainer = document.getElementById('certificationsSlides');
          const thumbnailContainer = document.getElementById('certThumbnailContainer');
          
          if (!slidesContainer || !thumbnailContainer) {
            console.error('Certifications slideshow containers not found');
            return;
          }

          console.log('Loading certification slides:', certificationsData.length, 'projects');

          // Clear existing content
          slidesContainer.innerHTML = '';
          thumbnailContainer.innerHTML = '';
          certSlides = [];

          certificationsData.forEach((project, index) => {
            // Create slide
            const slideDiv = document.createElement('div');
            slideDiv.classList.add('cert-slides');

            // Create slide content
            const slideContent = document.createElement('div');
            slideContent.classList.add('cert-slide-content');
            
            const titleElement = document.createElement('h2');
            titleElement.textContent = project.title;
            titleElement.style.textAlign = 'center';
            titleElement.style.marginBottom = '20px';
            titleElement.style.color = '#333';
            slideContent.appendChild(titleElement);

            const img = document.createElement('img');
            img.src = project.image1;
            img.style.cursor = 'pointer';
            img.style.maxWidth = '100%';
            img.style.height = 'auto';
            img.style.display = 'block';
            img.style.margin = '0 auto';
            img.title = 'Click to view GitHub repository';
            img.onerror = function() {
              console.error('Failed to load image:', project.image1);
              // Create a placeholder if image fails to load
              const placeholder = document.createElement('div');
              placeholder.style.width = '300px';
              placeholder.style.height = '200px';
              placeholder.style.backgroundColor = '#f0f0f0';
              placeholder.style.display = 'flex';
              placeholder.style.alignItems = 'center';
              placeholder.style.justifyContent = 'center';
              placeholder.style.margin = '0 auto';
              placeholder.style.border = '2px dashed #ccc';
              placeholder.style.borderRadius = '8px';
              placeholder.textContent = 'Image not available';
              placeholder.style.cursor = 'pointer';
              placeholder.onclick = () => window.open(project.githubUrl, '_blank');
              img.parentNode.replaceChild(placeholder, img);
            };
            img.onclick = () => window.open(project.githubUrl, '_blank');
            slideContent.appendChild(img);
            
            const descElement = document.createElement('p');
            descElement.textContent = project.description;
            descElement.style.marginTop = '20px';
            descElement.style.textAlign = 'justify';
            descElement.style.lineHeight = '1.6';
            descElement.style.fontSize = '16px';
            descElement.style.color = '#555';
            slideContent.appendChild(descElement);
            
            // Add GitHub link button
            const linkContainer = document.createElement('div');
            linkContainer.style.textAlign = 'center';
            linkContainer.style.marginTop = '20px';
            
            const githubLink = document.createElement('a');
            githubLink.href = project.githubUrl;
            githubLink.target = '_blank';
            githubLink.textContent = 'View on GitHub';
            githubLink.style.display = 'inline-block';
            githubLink.style.padding = '10px 20px';
            githubLink.style.backgroundColor = '#007bff';
            githubLink.style.color = 'white';
            githubLink.style.textDecoration = 'none';
            githubLink.style.borderRadius = '5px';
            githubLink.style.fontWeight = 'bold';
            githubLink.style.transition = 'background-color 0.3s ease';
            
            githubLink.onmouseover = function() {
              this.style.backgroundColor = '#0056b3';
            };
            githubLink.onmouseout = function() {
              this.style.backgroundColor = '#007bff';
            };
            
            linkContainer.appendChild(githubLink);
            slideContent.appendChild(linkContainer);
            
            slideDiv.appendChild(slideContent);
            slidesContainer.appendChild(slideDiv);

            // Create thumbnail
            const thumb = document.createElement('img');
            thumb.src = project.image1;
            thumb.classList.add('cert-thumb');
            thumb.style.cursor = 'pointer';
            thumb.title = project.title + ' - Click to view slide or Ctrl+Click for GitHub';
            thumb.onerror = function() {
              console.error('Failed to load thumbnail:', project.image1);
            };
            thumb.onclick = (event) => {
              if (event.ctrlKey || event.metaKey) {
                window.open(project.githubUrl, '_blank');
              } else {
                setCurrentCertSlide(index);
              }
            };
            thumbnailContainer.appendChild(thumb);

            certSlides.push(slideDiv);
          });

          console.log('Loaded', certSlides.length, 'certification slides');
          updateCertSlideCounter();
          
          // Show first slide
          if (certSlides.length > 0) {
            showCertSlide(0);
          }
        }

        function showCertSlide(index) {
          console.log('showCertSlide called with index:', index, 'certSlides.length:', certSlides.length);
          
          if (index >= certSlides.length) {
            currentCertSlideIndex = 0;
          } else if (index < 0) {
            currentCertSlideIndex = certSlides.length - 1;
          } else {
            currentCertSlideIndex = index;
          }

          console.log('Setting currentCertSlideIndex to:', currentCertSlideIndex);

          certSlides.forEach((slide, i) => {
            slide.style.display = i === currentCertSlideIndex ? 'block' : 'none';
          });
          
          // Update thumbnail highlighting
          const thumbnails = document.querySelectorAll('.cert-thumb');
          console.log('Found', thumbnails.length, 'certification thumbnails');
          
          thumbnails.forEach((thumb, i) => {
            if (i === currentCertSlideIndex) {
              thumb.classList.add('current-cert-thumb');
              console.log('Highlighting certification thumbnail', i);
            } else {
              thumb.classList.remove('current-cert-thumb');
            }
          });
          
          updateCertSlideCounter();
        }

        function nextCertSlide() {
          showCertSlide(currentCertSlideIndex + 1);
        }

        function prevCertSlide() {
          showCertSlide(currentCertSlideIndex - 1);
        }

        function setCurrentCertSlide(index) {
          showCertSlide(index);
        }

        function updateCertSlideCounter() {
          const currentSlideEl = document.getElementById('certCurrentSlide');
          const totalSlidesEl = document.getElementById('certTotalSlides');
          if (currentSlideEl && totalSlidesEl) {
            currentSlideEl.innerText = currentCertSlideIndex + 1;
            totalSlidesEl.innerText = certSlides.length.toString();
          }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
          console.log('DOM loaded, initializing certifications slideshow');
          
          // Add event listeners for navigation buttons
          const nextBtn = document.getElementById('certNextBtn');
          const prevBtn = document.getElementById('certPrevBtn');
          
          if (nextBtn) nextBtn.onclick = nextCertSlide;
          if (prevBtn) prevBtn.onclick = prevCertSlide;
          
          // Load the data and slides
          loadCertificationsData();
        });
    </script>
</body>
</html>
